<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qoo10Â§öÂäüËÉΩÊï∞ÊçÆÂ∑•ÂÖ∑ - ÁΩëÈ°µÁâà</title>
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --success-color: #4CAF50;
            --warning-color: #FF9800;
            --info-color: #2196F3;
            --danger-color: #f44336;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
        }
        
        .header {
            background: white;
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo h1 {
            color: var(--primary-color);
            font-size: 24px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .main-content {
            display: flex;
            min-height: 600px;
        }
        
        .sidebar {
            width: 250px;
            background: #f8f9fa;
            padding: 20px;
            border-right: 1px solid #eee;
        }
        
        .content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        .login-container {
            width: 100%;
            max-width: 400px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        button {
            padding: 12px 20px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a6fd8;
        }
        
        .btn-success {
            background: var(--success-color);
            color: white;
        }
        
        .btn-success:hover {
            background: #449d44;
        }
        
        .btn-warning {
            background: var(--warning-color);
            color: white;
        }
        
        .btn-warning:hover {
            background: #e68900;
        }
        
        .btn-info {
            background: var(--info-color);
            color: white;
        }
        
        .btn-info:hover {
            background: #1a7dc4;
        }
        
        .btn-danger {
            background: var(--danger-color);
            color: white;
        }
        
        .btn-danger:hover {
            background: #d32f2f;
        }
        
        .card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .card-header {
            padding-bottom: 15px;
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }
        
        .nav-menu {
            list-style: none;
        }
        
        .nav-item {
            margin-bottom: 10px;
        }
        
        .nav-link {
            display: block;
            padding: 12px 15px;
            border-radius: var(--border-radius);
            color: #555;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .nav-link:hover, .nav-link.active {
            background: var(--primary-color);
            color: white;
        }
        
        .hidden {
            display: none;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th, .table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .table th {
            background: #f8f9fa;
            font-weight: 600;
        }
        
        .status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-success {
            background: #e8f5e8;
            color: var(--success-color);
        }
        
        .status-warning {
            background: #fff3e0;
            color: var(--warning-color);
        }
        
        .status-danger {
            background: #ffeaea;
            color: var(--danger-color);
        }
        
        .progress-bar {
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--success-color);
            transition: width 0.3s;
        }
        
        .alert {
            padding: 12px 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }
        
        .alert-success {
            background: #e8f5e8;
            color: var(--success-color);
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background: #ffeaea;
            color: var(--danger-color);
            border: 1px solid #f5c6cb;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        
        .tab.active {
            border-bottom-color: var(--primary-color);
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .tool-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .tool-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            text-align: center;
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .tool-card:hover {
            transform: translateY(-5px);
        }
        
        .tool-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }
        
        .tool-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .tool-desc {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #eee;
            }
            
            .tool-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ÁôªÂΩïÈ°µÈù¢ -->
    <div id="loginPage" class="login-container">
        <div class="logo" style="justify-content: center; margin-bottom: 30px;">
            <h1>üîß Qoo10Êï∞ÊçÆÂ∑•ÂÖ∑</h1>
        </div>
        
        <div id="loginAlert" class="alert alert-error hidden"></div>
        
        <form id="loginForm">
            <div class="form-group">
                <label for="username">Áî®Êà∑Âêç</label>
                <input type="text" id="username" placeholder="ËØ∑ËæìÂÖ•Áî®Êà∑Âêç" required>
            </div>
            
            <div class="form-group">
                <label for="password">ÂØÜÁ†Å</label>
                <input type="password" id="password" placeholder="ËØ∑ËæìÂÖ•ÂØÜÁ†Å" required>
            </div>
            
            <button type="submit" class="btn-primary" style="width: 100%;">ÁôªÂΩï</button>
        </form>
        
        <div style="margin-top: 20px; text-align: center; font-size: 14px; color: #666;">
            <p>ÁÆ°ÁêÜÂëòË¥¶Âè∑: admin / ÂØÜÁ†Å: 112211</p>
            <p style="margin-top: 10px;">ÊºîÁ§∫Ë¥¶Âè∑: demo / ÂØÜÁ†Å: 123456</p>
        </div>
    </div>
    
    <!-- ‰∏ªÂ∫îÁî®È°µÈù¢ -->
    <div id="appPage" class="container hidden">
        <div class="header">
            <div class="logo">
                <h1>üîß Qoo10Êï∞ÊçÆÂ∑•ÂÖ∑</h1>
            </div>
            
            <div class="user-info">
                <span id="userRole"></span>
                <button id="logoutBtn" class="btn-danger">ÈÄÄÂá∫ÁôªÂΩï</button>
            </div>
        </div>
        
        <div class="main-content">
            <div class="sidebar">
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-tab="dashboard">ÊéßÂà∂Èù¢Êùø</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-tab="collector">ÂÖ≥ÈîÆËØçÈááÈõÜ</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-tab="brandDetector">ÂìÅÁâåÊ£ÄÊµã</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-tab="urlDetector">URLÊ£ÄÊµã</a>
                    </li>
                    <li id="adminNav" class="nav-item hidden">
                        <a href="#" class="nav-link" data-tab="userManagement">Áî®Êà∑ÁÆ°ÁêÜ</a>
                    </li>
                    <li id="adminNav2" class="nav-item hidden">
                        <a href="#" class="nav-link" data-tab="settings">Á≥ªÁªüËÆæÁΩÆ</a>
                    </li>
                </ul>
            </div>
            
            <div class="content">
                <!-- ÊéßÂà∂Èù¢Êùø -->
                <div id="dashboard" class="tab-content active">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Ê¨¢Ëøé‰ΩøÁî® Qoo10Êï∞ÊçÆÂ∑•ÂÖ∑</h2>
                        </div>
                        <p>ËøôÊòØ‰∏Ä‰∏™Â§öÂäüËÉΩÁöÑÊï∞ÊçÆÈááÈõÜÂíåÂàÜÊûêÂ∑•ÂÖ∑Ôºå‰∏ì‰∏∫Qoo10Âπ≥Âè∞ËÆæËÆ°„ÄÇ</p>
                        
                        <div class="tool-grid">
                            <div class="tool-card" data-tab="collector">
                                <div class="tool-icon">üì•</div>
                                <div class="tool-title">ÂÖ≥ÈîÆËØçÈááÈõÜ</div>
                                <div class="tool-desc">ÊâπÈáèÈááÈõÜÂïÜÂìÅÈìæÊé•ÔºåËá™Âä®ÊªöÂä®È°µÈù¢Ëé∑ÂèñÊõ¥Â§öÁªìÊûú</div>
                            </div>
                            
                            <div class="tool-card" data-tab="brandDetector">
                                <div class="tool-icon">üîç</div>
                                <div class="tool-title">ÂìÅÁâåÊ£ÄÊµã</div>
                                <div class="tool-desc">Ê£ÄÊµãÊêúÁ¥¢ÁªìÊûú‰∏≠ÊòØÂê¶ÂåÖÂê´ÂìÅÁâåÂïÜÂìÅ</div>
                            </div>
                            
                            <div class="tool-card" data-tab="urlDetector">
                                <div class="tool-icon">üåê</div>
                                <div class="tool-title">URLÊ£ÄÊµã</div>
                                <div class="tool-desc">ÂàÜÊûêÂïÜÂìÅÈ°µÈù¢Êï∞ÊçÆÔºåÊèêÂèñ‰ª∑Ê†º„ÄÅÈîÄÂîÆÁ≠â‰ø°ÊÅØ</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">‰ΩøÁî®ÁªüËÆ°</h2>
                        </div>
                        <div id="usageStats">
                            <p>ÊÇ®ÁöÑË¥¶Âè∑ÊúâÊïàÊúüËá≥: <span id="expiryDate">2023-12-31</span></p>
                            <p>Ââ©‰ΩôÂ§©Êï∞: <span id="remainingDays">30</span> Â§©</p>
                        </div>
                    </div>
                </div>
                
                <!-- ÂÖ≥ÈîÆËØçÈááÈõÜ -->
                <div id="collector" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">ÂÖ≥ÈîÆËØçÈááÈõÜ</h2>
                        </div>
                        
                        <div class="form-group">
                            <label for="collectorKeywords">ËæìÂÖ•ÂÖ≥ÈîÆËØçÔºàÊØèË°å‰∏Ä‰∏™Ôºâ:</label>
                            <textarea id="collectorKeywords" rows="5" placeholder="ËØ∑ËæìÂÖ•ÊêúÁ¥¢ÂÖ≥ÈîÆËØçÔºåÊØèË°å‰∏Ä‰∏™&#10;‰æãÂ¶ÇÔºö&#10;„Çè„Çì„Å¥„Éº„Åô&#10;Áå´Áî®„Åä„ÇÇ„Å°„ÇÉ&#10;„Éâ„ÉÉ„Ç∞„Éï„Éº„Éâ"></textarea>
                        </div>
                        
                        <div class="button-group" style="display: flex; gap: 10px; margin-bottom: 20px;">
                            <button id="startCollect" class="btn-primary">ÂºÄÂßãÊâπÈáèÈááÈõÜ</button>
                            <button id="stopCollect" class="btn-warning" disabled>ÂÅúÊ≠¢ÈááÈõÜ</button>
                        </div>
                        
                        <div class="progress">
                            <div>ËøõÂ∫¶: <span id="progressText">0/0</span></div>
                            <div class="progress-bar">
                                <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="button-group" style="display: flex; gap: 10px; margin-top: 20px;">
                            <button id="exportCSV" class="btn-info" disabled>ÂØºÂá∫CSV</button>
                            <button id="viewResults" class="btn-secondary">Êü•ÁúãÈááÈõÜÁªìÊûú</button>
                        </div>
                        
                        <div id="collectorStatus" class="status" style="margin-top: 20px;">Â∞±Áª™ - ËØ∑ËæìÂÖ•ÂÖ≥ÈîÆËØçÂêéÂºÄÂßãÈááÈõÜ</div>
                    </div>
                </div>
                
                <!-- ÂìÅÁâåÊ£ÄÊµã -->
                <div id="brandDetector" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">ÂìÅÁâåÊ£ÄÊµã</h2>
                        </div>
                        
                        <div class="form-group">
                            <label for="brandKeywords">ËæìÂÖ•ÂÖ≥ÈîÆËØçÔºàÊØèË°å‰∏Ä‰∏™Ôºâ:</label>
                            <textarea id="brandKeywords" rows="5" placeholder="ËØ∑ËæìÂÖ•ÊêúÁ¥¢ÂÖ≥ÈîÆËØçÔºåÊØèË°å‰∏Ä‰∏™&#10;‰æãÂ¶ÇÔºö&#10;„Çè„Çì„Å¥„Éº„Åô&#10;Áå´Áî®„Åä„ÇÇ„Å°„ÇÉ&#10;„Éâ„ÉÉ„Ç∞„Éï„Éº„Éâ"></textarea>
                        </div>
                        
                        <div class="button-group" style="display: flex; gap: 10px; margin-bottom: 20px;">
                            <button id="checkBrand" class="btn-primary">ÂºÄÂßãÂìÅÁâåÊ£ÄÊµã</button>
                            <button id="viewBrandResults" class="btn-secondary" disabled>Êü•ÁúãÊ£ÄÊµãÁªìÊûú</button>
                            <button id="exportBrandCSV" class="btn-info" disabled>ÂØºÂá∫CSV</button>
                        </div>
                        
                        <div id="brandStatus" class="status">Â∞±Áª™ - ËØ∑ËæìÂÖ•ÂÖ≥ÈîÆËØçÂêéÂºÄÂßãÊ£ÄÊµã</div>
                    </div>
                </div>
                
                <!-- URLÊ£ÄÊµã -->
                <div id="urlDetector" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">URLÊ£ÄÊµã</h2>
                        </div>
                        
                        <div class="form-group">
                            <label for="urls">ËæìÂÖ•Qoo10 URL:</label>
                            <textarea id="urls" rows="5" placeholder="ËØ∑ËæìÂÖ•Qoo10Â∫óÈì∫URLÊàñÂïÜÂìÅURLÔºåÊØèË°å‰∏Ä‰∏™&#10;‰æãÂ¶ÇÔºö&#10;https://www.qoo10.jp/shop/morecon?cit=1021126500&#10;https://www.qoo10.jp/g/1047384009"></textarea>
                        </div>
                        
                        <div class="button-group" style="display: flex; gap: 10px; margin-bottom: 20px;">
                            <button id="extractUrls" class="btn-primary">ÊèêÂèñÂïÜÂìÅURL</button>
                            <button id="checkUrls" class="btn-info" disabled>Ê£ÄÊµãÊï∞ÊçÆ</button>
                            <button id="exportUrlCSV" class="btn-info" disabled>ÂØºÂá∫CSV</button>
                        </div>
                        
                        <div id="urlStatus" class="status">Â∞±Áª™ - ËØ∑ËæìÂÖ•URLÂêéÂºÄÂßãÊ£ÄÊµã</div>
                    </div>
                </div>
                
                <!-- Áî®Êà∑ÁÆ°ÁêÜ (‰ªÖÁÆ°ÁêÜÂëòÂèØËßÅ) -->
                <div id="userManagement" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Áî®Êà∑ÁÆ°ÁêÜ</h2>
                            <button id="addUserBtn" class="btn-success">Ê∑ªÂä†Áî®Êà∑</button>
                        </div>
                        
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Áî®Êà∑Âêç</th>
                                    <th>ËßíËâ≤</th>
                                    <th>ÊúâÊïàÊúüËá≥</th>
                                    <th>Áä∂ÊÄÅ</th>
                                    <th>Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody id="userTableBody">
                                <!-- Áî®Êà∑Êï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Á≥ªÁªüËÆæÁΩÆ (‰ªÖÁÆ°ÁêÜÂëòÂèØËßÅ) -->
                <div id="settings" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Á≥ªÁªüËÆæÁΩÆ</h2>
                        </div>
                        
                        <div class="form-group">
                            <label for="adminPassword">ÁÆ°ÁêÜÂëòÂØÜÁ†Å</label>
                            <input type="password" id="adminPassword" placeholder="ËØ∑ËæìÂÖ•Êñ∞ÂØÜÁ†Å">
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmPassword">Á°ÆËÆ§ÂØÜÁ†Å</label>
                            <input type="password" id="confirmPassword" placeholder="ËØ∑ÂÜçÊ¨°ËæìÂÖ•ÂØÜÁ†Å">
                        </div>
                        
                        <button id="changePasswordBtn" class="btn-primary">‰øÆÊîπÂØÜÁ†Å</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ê∑ªÂä†Áî®Êà∑Ê®°ÊÄÅÊ°Ü -->
    <div id="addUserModal" class="modal hidden">
        <div class="card" style="width: 400px;">
            <div class="card-header">
                <h2 class="card-title">Ê∑ªÂä†Áî®Êà∑</h2>
                <button id="closeModalBtn" style="background: none; border: none; font-size: 20px; cursor: pointer;">√ó</button>
            </div>
            
            <div class="form-group">
                <label for="newUsername">Áî®Êà∑Âêç</label>
                <input type="text" id="newUsername" placeholder="ËØ∑ËæìÂÖ•Áî®Êà∑Âêç">
            </div>
            
            <div class="form-group">
                <label for="newUserPassword">ÂØÜÁ†Å</label>
                <input type="password" id="newUserPassword" placeholder="ËØ∑ËæìÂÖ•ÂØÜÁ†Å">
            </div>
            
            <div class="form-group">
                <label for="userRoleSelect">ËßíËâ≤</label>
                <select id="userRoleSelect">
                    <option value="user">ÊôÆÈÄöÁî®Êà∑</option>
                    <option value="admin">ÁÆ°ÁêÜÂëò</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="userExpiryDays">ÊúâÊïàÊúüÔºàÂ§©Ôºâ</label>
                <input type="number" id="userExpiryDays" value="30" min="1">
            </div>
            
            <div class="button-group" style="display: flex; gap: 10px;">
                <button id="saveUserBtn" class="btn-success">‰øùÂ≠ò</button>
                <button id="cancelUserBtn" class="btn-secondary">ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <script>
        // Áî®Êà∑Êï∞ÊçÆÂ≠òÂÇ®
        let users = JSON.parse(localStorage.getItem('qoo10_users')) || [
            { username: 'admin', password: '112211', role: 'admin', expiryDate: '2099-12-31' },
            { username: 'demo', password: '123456', role: 'user', expiryDate: '2024-12-31' }
        ];
        
        // ÂΩìÂâçÁôªÂΩïÁî®Êà∑
        let currentUser = null;
        
        // DOMÂÖÉÁ¥†
        const loginPage = document.getElementById('loginPage');
        const appPage = document.getElementById('appPage');
        const loginForm = document.getElementById('loginForm');
        const loginAlert = document.getElementById('loginAlert');
        const logoutBtn = document.getElementById('logoutBtn');
        const userRole = document.getElementById('userRole');
        const adminNav = document.getElementById('adminNav');
        const adminNav2 = document.getElementById('adminNav2');
        const expiryDate = document.getElementById('expiryDate');
        const remainingDays = document.getElementById('remainingDays');
        const userTableBody = document.getElementById('userTableBody');
        const addUserModal = document.getElementById('addUserModal');
        const addUserBtn = document.getElementById('addUserBtn');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const saveUserBtn = document.getElementById('saveUserBtn');
        const cancelUserBtn = document.getElementById('cancelUserBtn');
        const changePasswordBtn = document.getElementById('changePasswordBtn');
        
        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁôªÂΩï
            const savedUser = localStorage.getItem('qoo10_currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showAppPage();
            }
            
            // ÁôªÂΩïË°®ÂçïÊèê‰∫§
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                const user = users.find(u => u.username === username && u.password === password);
                
                if (user) {
                    // Ê£ÄÊü•Ë¥¶Âè∑ÊòØÂê¶ËøáÊúü
                    const today = new Date();
                    const expiry = new Date(user.expiryDate);
                    
                    if (expiry < today && user.role !== 'admin') {
                        showAlert('Ë¥¶Âè∑Â∑≤ËøáÊúüÔºåËØ∑ËÅîÁ≥ªÁÆ°ÁêÜÂëò', 'error');
                        return;
                    }
                    
                    currentUser = user;
                    localStorage.setItem('qoo10_currentUser', JSON.stringify(user));
                    showAppPage();
                } else {
                    showAlert('Áî®Êà∑ÂêçÊàñÂØÜÁ†ÅÈîôËØØ', 'error');
                }
            });
            
            // ÈÄÄÂá∫ÁôªÂΩï
            logoutBtn.addEventListener('click', function() {
                currentUser = null;
                localStorage.removeItem('qoo10_currentUser');
                showLoginPage();
            });
            
            // ÂØºËà™ËèúÂçïÁÇπÂáª
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // ÁßªÈô§ÊâÄÊúâactiveÁ±ª
                    document.querySelectorAll('.nav-link').forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    // Ê∑ªÂä†activeÁ±ªÂà∞ÂΩìÂâçÁÇπÂáªÁöÑÈìæÊé•
                    this.classList.add('active');
                    
                    // ÈöêËóèÊâÄÊúâÊ†áÁ≠æÂÜÖÂÆπ
                    document.querySelectorAll('.tab-content').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    
                    // ÊòæÁ§∫ÂØπÂ∫îÁöÑÊ†áÁ≠æÂÜÖÂÆπ
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Â∑•ÂÖ∑Âç°ÁâáÁÇπÂáª
            document.querySelectorAll('.tool-card').forEach(card => {
                card.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Êõ¥Êñ∞ÂØºËà™ËèúÂçï
                    document.querySelectorAll('.nav-link').forEach(item => {
                        item.classList.remove('active');
                        if (item.getAttribute('data-tab') === tabId) {
                            item.classList.add('active');
                        }
                    });
                    
                    // ÊòæÁ§∫ÂØπÂ∫îÁöÑÊ†áÁ≠æÂÜÖÂÆπ
                    document.querySelectorAll('.tab-content').forEach(tab => {
                        tab.classList.remove('active');
                        if (tab.id === tabId) {
                            tab.classList.add('active');
                        }
                    });
                });
            });
            
            // Áî®Êà∑ÁÆ°ÁêÜÁõ∏ÂÖ≥
            addUserBtn.addEventListener('click', function() {
                addUserModal.classList.remove('hidden');
            });
            
            closeModalBtn.addEventListener('click', function() {
                addUserModal.classList.add('hidden');
            });
            
            cancelUserBtn.addEventListener('click', function() {
                addUserModal.classList.add('hidden');
            });
            
            saveUserBtn.addEventListener('click', function() {
                const newUsername = document.getElementById('newUsername').value;
                const newPassword = document.getElementById('newUserPassword').value;
                const role = document.getElementById('userRoleSelect').value;
                const expiryDays = parseInt(document.getElementById('userExpiryDays').value);
                
                if (!newUsername || !newPassword) {
                    alert('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑÁî®Êà∑‰ø°ÊÅØ');
                    return;
                }
                
                // Ê£ÄÊü•Áî®Êà∑ÂêçÊòØÂê¶Â∑≤Â≠òÂú®
                if (users.find(u => u.username === newUsername)) {
                    alert('Áî®Êà∑ÂêçÂ∑≤Â≠òÂú®');
                    return;
                }
                
                // ËÆ°ÁÆóËøáÊúüÊó•Êúü
                const expiryDate = new Date();
                expiryDate.setDate(expiryDate.getDate() + expiryDays);
                
                // Ê∑ªÂä†Êñ∞Áî®Êà∑
                users.push({
                    username: newUsername,
                    password: newPassword,
                    role: role,
                    expiryDate: expiryDate.toISOString().split('T')[0]
                });
                
                // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                localStorage.setItem('qoo10_users', JSON.stringify(users));
                
                // Êõ¥Êñ∞Áî®Êà∑Ë°®Ê†º
                renderUserTable();
                
                // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
                addUserModal.classList.add('hidden');
                
                // Ê∏ÖÁ©∫Ë°®Âçï
                document.getElementById('newUsername').value = '';
                document.getElementById('newUserPassword').value = '';
                document.getElementById('userRoleSelect').value = 'user';
                document.getElementById('userExpiryDays').value = '30';
            });
            
            // ‰øÆÊîπÂØÜÁ†Å
            changePasswordBtn.addEventListener('click', function() {
                const newPassword = document.getElementById('adminPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                if (!newPassword || !confirmPassword) {
                    alert('ËØ∑Â°´ÂÜôÂØÜÁ†Å');
                    return;
                }
                
                if (newPassword !== confirmPassword) {
                    alert('‰∏§Ê¨°ËæìÂÖ•ÁöÑÂØÜÁ†Å‰∏ç‰∏ÄËá¥');
                    return;
                }
                
                // Êõ¥Êñ∞ÁÆ°ÁêÜÂëòÂØÜÁ†Å
                const adminUser = users.find(u => u.username === 'admin');
                if (adminUser) {
                    adminUser.password = newPassword;
                    localStorage.setItem('qoo10_users', JSON.stringify(users));
                    alert('ÂØÜÁ†Å‰øÆÊîπÊàêÂäü');
                    
                    // Ê∏ÖÁ©∫Ë°®Âçï
                    document.getElementById('adminPassword').value = '';
                    document.getElementById('confirmPassword').value = '';
                }
            });
            
            // ÂàùÂßãÂåñÁî®Êà∑Ë°®Ê†º
            renderUserTable();
        });
        
        // ÊòæÁ§∫ÁôªÂΩïÈ°µÈù¢
        function showLoginPage() {
            loginPage.classList.remove('hidden');
            appPage.classList.add('hidden');
        }
        
        // ÊòæÁ§∫Â∫îÁî®È°µÈù¢
        function showAppPage() {
            loginPage.classList.add('hidden');
            appPage.classList.remove('hidden');
            
            // Êõ¥Êñ∞Áî®Êà∑‰ø°ÊÅØ
            userRole.textContent = `${currentUser.username} (${currentUser.role === 'admin' ? 'ÁÆ°ÁêÜÂëò' : 'ÊôÆÈÄöÁî®Êà∑'})`;
            
            // ÊòæÁ§∫/ÈöêËóèÁÆ°ÁêÜÂëòËèúÂçï
            if (currentUser.role === 'admin') {
                adminNav.classList.remove('hidden');
                adminNav2.classList.remove('hidden');
            } else {
                adminNav.classList.add('hidden');
                adminNav2.classList.add('hidden');
            }
            
            // Êõ¥Êñ∞ÊúâÊïàÊúü‰ø°ÊÅØ
            const today = new Date();
            const expiry = new Date(currentUser.expiryDate);
            const diffTime = expiry - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            expiryDate.textContent = currentUser.expiryDate;
            remainingDays.textContent = diffDays > 0 ? diffDays : 0;
        }
        
        // ÊòæÁ§∫ÊèêÁ§∫‰ø°ÊÅØ
        function showAlert(message, type) {
            loginAlert.textContent = message;
            loginAlert.className = `alert alert-${type}`;
            loginAlert.classList.remove('hidden');
            
            // 3ÁßíÂêéËá™Âä®ÈöêËóè
            setTimeout(() => {
                loginAlert.classList.add('hidden');
            }, 3000);
        }
        
        // Ê∏≤ÊüìÁî®Êà∑Ë°®Ê†º
        function renderUserTable() {
            userTableBody.innerHTML = '';
            
            users.forEach(user => {
                if (user.username === 'admin' && currentUser.username !== 'admin') return;
                
                const row = document.createElement('tr');
                
                // Áî®Êà∑Âêç
                const usernameCell = document.createElement('td');
                usernameCell.textContent = user.username;
                row.appendChild(usernameCell);
                
                // ËßíËâ≤
                const roleCell = document.createElement('td');
                roleCell.textContent = user.role === 'admin' ? 'ÁÆ°ÁêÜÂëò' : 'ÊôÆÈÄöÁî®Êà∑';
                row.appendChild(roleCell);
                
                // ÊúâÊïàÊúü
                const expiryCell = document.createElement('td');
                expiryCell.textContent = user.expiryDate;
                row.appendChild(expiryCell);
                
                // Áä∂ÊÄÅ
                const statusCell = document.createElement('td');
                const statusSpan = document.createElement('span');
                
                const today = new Date();
                const expiry = new Date(user.expiryDate);
                
                if (expiry < today && user.role !== 'admin') {
                    statusSpan.textContent = 'Â∑≤ËøáÊúü';
                    statusSpan.className = 'status status-danger';
                } else {
                    statusSpan.textContent = 'ÊúâÊïà';
                    statusSpan.className = 'status status-success';
                }
                
                statusCell.appendChild(statusSpan);
                row.appendChild(statusCell);
                
                // Êìç‰Ωú
                const actionCell = document.createElement('td');
                
                if (user.username !== 'admin' || currentUser.username === 'admin') {
                    const editButton = document.createElement('button');
                    editButton.textContent = 'ÁºñËæë';
                    editButton.className = 'btn-info';
                    editButton.style.marginRight = '5px';
                    editButton.addEventListener('click', function() {
                        editUser(user.username);
                    });
                    
                    const deleteButton = document.createElement('button');
                    deleteButton.textContent = 'Âà†Èô§';
                    deleteButton.className = 'btn-danger';
                    deleteButton.addEventListener('click', function() {
                        deleteUser(user.username);
                    });
                    
                    actionCell.appendChild(editButton);
                    actionCell.appendChild(deleteButton);
                } else {
                    actionCell.textContent = '-';
                }
                
                row.appendChild(actionCell);
                userTableBody.appendChild(row);
            });
        }
        
        // ÁºñËæëÁî®Êà∑
        function editUser(username) {
            const user = users.find(u => u.username === username);
            if (!user) return;
            
            document.getElementById('newUsername').value = user.username;
            document.getElementById('newUserPassword').value = user.password;
            document.getElementById('userRoleSelect').value = user.role;
            
            // ËÆ°ÁÆóÂâ©‰ΩôÂ§©Êï∞
            const today = new Date();
            const expiry = new Date(user.expiryDate);
            const diffTime = expiry - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            document.getElementById('userExpiryDays').value = diffDays > 0 ? diffDays : 0;
            
            addUserModal.classList.remove('hidden');
            
            // ‰øÆÊîπ‰øùÂ≠òÊåâÈíÆË°å‰∏∫
            saveUserBtn.onclick = function() {
                const newUsername = document.getElementById('newUsername').value;
                const newPassword = document.getElementById('newUserPassword').value;
                const role = document.getElementById('userRoleSelect').value;
                const expiryDays = parseInt(document.getElementById('userExpiryDays').value);
                
                if (!newUsername || !newPassword) {
                    alert('ËØ∑Â°´ÂÜôÂÆåÊï¥ÁöÑÁî®Êà∑‰ø°ÊÅØ');
                    return;
                }
                
                // Êõ¥Êñ∞Áî®Êà∑‰ø°ÊÅØ
                user.username = newUsername;
                user.password = newPassword;
                user.role = role;
                
                // ËÆ°ÁÆóÊñ∞ÁöÑËøáÊúüÊó•Êúü
                const newExpiryDate = new Date();
                newExpiryDate.setDate(newExpiryDate.getDate() + expiryDays);
                user.expiryDate = newExpiryDate.toISOString().split('T')[0];
                
                // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                localStorage.setItem('qoo10_users', JSON.stringify(users));
                
                // Êõ¥Êñ∞Áî®Êà∑Ë°®Ê†º
                renderUserTable();
                
                // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
                addUserModal.classList.add('hidden');
                
                // ÈáçÁΩÆ‰øùÂ≠òÊåâÈíÆË°å‰∏∫
                saveUserBtn.onclick = function() {
                    // Ê∑ªÂä†Áî®Êà∑ÁöÑÈÄªËæë
                };
                
                // Ê∏ÖÁ©∫Ë°®Âçï
                document.getElementById('newUsername').value = '';
                document.getElementById('newUserPassword').value = '';
                document.getElementById('userRoleSelect').value = 'user';
                document.getElementById('userExpiryDays').value = '30';
            };
        }
        
        // Âà†Èô§Áî®Êà∑
        function deleteUser(username) {
            if (username === 'admin') {
                alert('‰∏çËÉΩÂà†Èô§ÁÆ°ÁêÜÂëòË¥¶Âè∑');
                return;
            }
            
            if (confirm(`Á°ÆÂÆöË¶ÅÂà†Èô§Áî®Êà∑ "${username}" ÂêóÔºü`)) {
                users = users.filter(u => u.username !== username);
                localStorage.setItem('qoo10_users', JSON.stringify(users));
                renderUserTable();
            }
        }
        
        // ‰ª•‰∏ãÊòØÂéüÊúâÂäüËÉΩÁöÑÁÆÄÂåñÂÆûÁé∞
        // Âú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåËøô‰∫õÂäüËÉΩÈúÄË¶Å‰∏éÂêéÁ´ØAPI‰∫§‰∫í
        
        // ÂÖ≥ÈîÆËØçÈááÈõÜÂäüËÉΩ
        document.getElementById('startCollect').addEventListener('click', function() {
            const keywords = document.getElementById('collectorKeywords').value.split('\n')
                .map(k => k.trim())
                .filter(k => k.length > 0);
            
            if (keywords.length === 0) {
                document.getElementById('collectorStatus').textContent = 'ËØ∑ËæìÂÖ•Ëá≥Â∞ë‰∏Ä‰∏™ÂÖ≥ÈîÆËØç';
                document.getElementById('collectorStatus').className = 'status status-danger';
                return;
            }
            
            // Ê®°ÊãüÈááÈõÜËøáÁ®ã
            document.getElementById('startCollect').disabled = true;
            document.getElementById('stopCollect').disabled = false;
            document.getElementById('collectorStatus').textContent = 'ÂºÄÂßãÊâπÈáèÈááÈõÜ...';
            document.getElementById('collectorStatus').className = 'status status-warning';
            
            let current = 0;
            const total = keywords.length;
            
            const interval = setInterval(() => {
                current++;
                document.getElementById('progressText').textContent = `${current}/${total}`;
                document.getElementById('progressFill').style.width = `${(current / total) * 100}%`;
                
                if (current >= total) {
                    clearInterval(interval);
                    document.getElementById('startCollect').disabled = false;
                    document.getElementById('stopCollect').disabled = true;
                    document.getElementById('exportCSV').disabled = false;
                    document.getElementById('collectorStatus').textContent = 'ÈááÈõÜÂÆåÊàê';
                    document.getElementById('collectorStatus').className = 'status status-success';
                }
            }, 500);
            
            // ÂÅúÊ≠¢ÊåâÈíÆÂäüËÉΩ
            document.getElementById('stopCollect').onclick = function() {
                clearInterval(interval);
                document.getElementById('startCollect').disabled = false;
                document.getElementById('stopCollect').disabled = true;
                document.getElementById('collectorStatus').textContent = 'ÈááÈõÜÂ∑≤ÂÅúÊ≠¢';
                document.getElementById('collectorStatus').className = 'status status-danger';
            };
        });
        
        // ÂìÅÁâåÊ£ÄÊµãÂäüËÉΩ
        document.getElementById('checkBrand').addEventListener('click', function() {
            const keywords = document.getElementById('brandKeywords').value.split('\n')
                .map(k => k.trim())
                .filter(k => k.length > 0);
            
            if (keywords.length === 0) {
                document.getElementById('brandStatus').textContent = 'ËØ∑ËæìÂÖ•Ëá≥Â∞ë‰∏Ä‰∏™ÂÖ≥ÈîÆËØç';
                document.getElementById('brandStatus').className = 'status status-danger';
                return;
            }
            
            document.getElementById('brandStatus').textContent = 'Ê≠£Âú®Ê£ÄÊµãÂìÅÁâå...';
            document.getElementById('brandStatus').className = 'status status-warning';
            
            // Ê®°ÊãüÊ£ÄÊµãËøáÁ®ã
            setTimeout(() => {
                document.getElementById('viewBrandResults').disabled = false;
                document.getElementById('exportBrandCSV').disabled = false;
                document.getElementById('brandStatus').textContent = 'ÂìÅÁâåÊ£ÄÊµãÂÆåÊàê';
                document.getElementById('brandStatus').className = 'status status-success';
            }, 2000);
        });
        
        // URLÊ£ÄÊµãÂäüËÉΩ
        document.getElementById('extractUrls').addEventListener('click', function() {
            const urls = document.getElementById('urls').value.split('\n')
                .map(u => u.trim())
                .filter(u => u.length > 0);
            
            if (urls.length === 0) {
                document.getElementById('urlStatus').textContent = 'ËØ∑ËæìÂÖ•Ëá≥Â∞ë‰∏Ä‰∏™URL';
                document.getElementById('urlStatus').className = 'status status-danger';
                return;
            }
            
            document.getElementById('urlStatus').textContent = 'Ê≠£Âú®ÊèêÂèñÂïÜÂìÅURL...';
            document.getElementById('urlStatus').className = 'status status-warning';
            
            // Ê®°ÊãüÊèêÂèñËøáÁ®ã
            setTimeout(() => {
                document.getElementById('checkUrls').disabled = false;
                document.getElementById('urlStatus').textContent = 'URLÊèêÂèñÂÆåÊàê';
                document.getElementById('urlStatus').className = 'status status-success';
            }, 2000);
        });
        
        document.getElementById('checkUrls').addEventListener('click', function() {
            document.getElementById('urlStatus').textContent = 'Ê≠£Âú®Ê£ÄÊµãURLÊï∞ÊçÆ...';
            document.getElementById('urlStatus').className = 'status status-warning';
            
            // Ê®°ÊãüÊ£ÄÊµãËøáÁ®ã
            setTimeout(() => {
                document.getElementById('exportUrlCSV').disabled = false;
                document.getElementById('urlStatus').textContent = 'URLÊ£ÄÊµãÂÆåÊàê';
                document.getElementById('urlStatus').className = 'status status-success';
            }, 2000);
        });
    </script>
</body>
</html>
